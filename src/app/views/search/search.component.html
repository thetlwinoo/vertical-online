<div class="page-layout blank">
  <div class="container">
    <div class="page-layout simple left-sidebar">
      <root-sidebar class="sidebar" name="simple-left-sidebar-2" position="left" lockedOpen="gt-md">
        <div class="content">
          <div class="shop-sidebar-wrapper gray-bg-7">
            <category [filter]="categoriesFilter$ | async" (selectedCategories)="onSelectedCategories($event)">
            </category>
            <color [filter]="colorFilter$ | async" (selectedColors)="onSelectedColors($event)">
            </color>
            <price-filter [rangePrice]="priceFilter$ | async" [min]="minPrice" [max]="maxPrice"
              (selectedPrices)="onSelectedPrices($event)">
            </price-filter>
            <!-- <condition (changeCondition)="updateCondition($event)"></condition> -->
            <rating></rating>
          </div>
        </div>
      </root-sidebar>
      <div class="center">
        <div class="header header-light-grey p-12" fxLayout="row" fxLayoutAlign="start center">

          <!-- <button mat-icon-button class="sidebar-toggle mr-8" fxHide.gt-md
            (click)="toggleSidebar('simple-left-sidebar-2')">
            <mat-icon>menu</mat-icon>
          </button> -->
        </div>
        <div class="horizontal-content">
          <!-- <div class="horizontal-wrapper" *ngIf="key?.length>0">
            <div class="horizontal-spacer">
              <h4>Search related to &#34;
                <span>{{key}}</span>&#34;</h4>
            </div>
          </div> -->
          <div class="content">
            <div class="d-flex justify-content-center" *ngIf="(loading$ | async);else productlist">
              <div class="spinner-grow" role="status">
                <span class="sr-only">Loading...</span>
              </div>
            </div>
            <ng-template #productlist>
              <div class="row list-gutters">
                <div class="col-xs-6 col-sm-6 col-md-3" *ngFor="let product of (products$ | async)">
                  <a [routerLink]="['/products',product.id]" routerLinkActive="active">
                    <product-card [product]="product" (quickview)="onQuickView($event)"></product-card>
                  </a>
                </div>
              </div>
              <div class="row justify-content-center">
                <ngb-pagination [collectionSize]="(totalItems$|async)" [(page)]="page" [pageSize]="itemsPerPage"
                  [maxSize]="5" [rotate]="true" [boundaryLinks]="true" (pageChange)="loadPage(page)"></ngb-pagination>
              </div>
            </ng-template>
          </div>
        </div>
      </div>
    </div>
  </div>